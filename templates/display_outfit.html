<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outfit Display</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="vh-100 m-0 p-0" style="background-color: white;">
    <header class="navbar navbar-dark fixed-top" style="background-color: #76b0e0;">
        <div class="fixed-top text-center p-1" style="background-color: #76b0e0;color: #000000;">
            <a href="/home" class="btn"> <h2>DressRight</h2></a>
        </div>
    </header>
    
    <style>
        .remove-button {
            position: absolute;
            top: 60%;
            right: 5%;
        }
    </style>
    
    <div class="container-fluid mt-3 pt-5">
        <div class="text-center mb-3">
            <h1 class="p-2">{{ outfit.name }} Outfit</h1>
        </div>
        <div class="d-flex flex-column flex-md-row justify-content-md-between align-items-center mb-3">
            <div class="mb-2 mb-md-0">
                <button type="button" class="btn btn-primary" id="wearButton">Wear</button>
                <button type="button" class="btn btn-danger " id="removeButton">Remove</button>
            </div>
        </div>
    </div>
    <div class="image-card">
        {% for user_cloth_id, image_url in images %}
            {% if user_cloth_id %}
                <div class="image-card">
                    <a href="{% url 'cloths_detail' item_id=user_cloth_id %}">
                        <img src="/media/{{ image_url }}" class="img-fluid">
                    </a>
                </div>
            {% endif %}
        {% endfor %}
    </div>
    
    <div class="fixed-bottom bg-light p-2 mt-auto" style="position: fixed; bottom: 0; width: 100%; z-index: 3;">
        <div class="container">
            <div class="row justify-content-around">
                <div class="col-3 text-center">
                    <a href="/home" class="btn btn-light"><i style="color: #95c9f4;" class="fa fa-home fa-2x"></i></a>
                </div>
                <div class="col-3 text-center">
                    <a href="/cloths" class="btn btn-light"><i style="color: #95c9f4;" class="fa fa-suitcase fa-2x"></i></a>
                </div>
                <div class="col-3 text-center">
                    <a href="/upload" class="btn btn-light"><i style="color: #95c9f4;" class="fa fa-upload fa-2x"></i></a>
                </div>
                <div class="col-3 text-center">
                    <a href="/profile" class="btn btn-secondary"><i style="color: #95c9f4;" class="fa fa-user fa-2x"></i></a>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.getElementById("removeButton").addEventListener("click", function() {
            if (confirm("Are you sure you want to remove this outfit?")) {
                window.location.href = "{% url 'remove_outfit' outfit_id=outfit.pk %}";
            }
        });
    document.getElementById("wearButton").addEventListener("click", function() {
        if (confirm("Are you sure you want to wear this outfit?")) {
            const ids = "{{ ids}}";  // Serialize list to a comma-separated string
            const url = "/worn_again/" + ids + "/";  // Construct the URL
            window.location.href = url;  // Pass the serialized IDs to the URL
        }
    });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>
</html>
